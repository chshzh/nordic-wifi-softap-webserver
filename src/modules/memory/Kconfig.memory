menu "Memory diagnostics"

config APP_HEAP_MONITOR
	bool "Enable runtime heap monitor"
	default y
	select SYS_HEAP_RUNTIME_STATS
	select SYS_HEAP_LISTENER
	help
	  Enable runtime monitoring of the system heap (_system_heap) to track
	  memory usage and log high-water marks during operation. This module
	  registers a heap listener that reports peak allocation whenever usage
	  increases by CONFIG_APP_HEAP_MONITOR_STEP_BYTES or exceeds the warning
	  threshold. Useful for sizing heap requirements during development.
	  The monitor also emits a boot-time report showing initial heap state.
	  Disable this option in production if the listener overhead or log
	  volume is not acceptable.

config APP_HEAP_MONITOR_WARN_PCT
	int "Warn threshold for heap high-water mark"
	default 88
	range 50 99
	depends on APP_HEAP_MONITOR
	help
	  Emit a warning when the tracked heap max crosses this percentage of the
	  total heap size.

config APP_HEAP_MONITOR_STEP_BYTES
	int "Minimum increase before logging a new high-water mark"
	default 4096
	range 256 65536
	depends on APP_HEAP_MONITOR
	help
	  Prevent log spam by only reporting new peaks after this many additional
	  bytes have been allocated since the last report.

endmenu
